var CustomersView=function(){var d=this,g="1.0.9.3333";this.init=function(){DataLudi.setRootContext('/lib/gridludi');this._ds=DataLudi.createGridDataSet(getFields());this._ds.onRowUpdated=function(){};this._ds.onRowInserted=function(){};this._grid=DataLudi.createGridView('grid',getColumns());this._grid.setDataSource(this._ds);this._grid.editOptions().setInsertable(true).setAppendable(true).setDeletable(true);this._grid.loadStyles(ludistyles);this._grid.footer().setVisible(false);this._grid.onCurrentChanged=function(a,e){};this._grid.onRowsDeleting=function(e,b){var c=b[0],f=d._ds.getValue(c,'_id');$.ajax({url:'/customers/'+f,type:'DELETE',success:function(a){if(a.removed>0)d._ds.deleteRow(c);else{console.log('0 removed.');}},error:function(){alert('failed.');}});return false;};return this;};this.load=function(){$.ajax({url:'/customers',success:function(a){d._ds.clearRows();d._ds.appendRows(a);}});};this.save=function(e){this._grid.commit();var b=this._grid.focusedDataRowIndex();if(b>=0){var c=this._ds.getRowObject(b);console.log(c);$.ajax({url:'/customers',type:'POST',data:c,success:function(a){if(!a){console.log(a);alert('sorry, failed to save...');}else{d._ds.updateRow(b,a);}},error:function(a){console.log(a);alert('failed.');}});}else{return alert('값을 가져올 행을 선택하세요');}};this.isDirty=function(){return false;};};